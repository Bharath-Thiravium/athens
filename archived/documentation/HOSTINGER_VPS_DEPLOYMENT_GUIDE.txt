ðŸš€ HOSTINGER VPS DEPLOYMENT GUIDE - EHS PRO SYSTEM
=================================================

ðŸ“‹ PREREQUISITES
================
- Hostinger VPS account
- Domain name (optional)
- SSH access to VPS
- Basic Linux knowledge

ðŸ–¥ï¸ STEP 1: VPS SETUP & ACCESS
=============================

1. LOGIN TO HOSTINGER VPS:
   - Go to Hostinger control panel
   - Access your VPS
   - Note down: IP address, username, password

2. SSH CONNECTION:
   ssh root@your-vps-ip
   # Enter password when prompted

3. UPDATE SYSTEM:
   apt update && apt upgrade -y

ðŸ³ STEP 2: INSTALL DOCKER & DOCKER COMPOSE
==========================================

1. INSTALL DOCKER:
   curl -fsSL https://get.docker.com -o get-docker.sh
   sh get-docker.sh
   systemctl start docker
   systemctl enable docker

2. INSTALL DOCKER COMPOSE:
   curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
   chmod +x /usr/local/bin/docker-compose

3. VERIFY INSTALLATION:
   docker --version
   docker-compose --version

ðŸ“ STEP 3: UPLOAD PROJECT FILES
===============================

1. CREATE PROJECT DIRECTORY:
   mkdir -p /var/www/ehs-pro
   cd /var/www/ehs-pro

2. UPLOAD FILES (Choose one method):

   METHOD A - Using SCP from local machine:
   scp -r /path/to/your/project/* root@your-vps-ip:/var/www/ehs-pro/

   METHOD B - Using Git:
   git clone https://github.com/yourusername/ehs-pro.git .

   METHOD C - Using FileZilla/WinSCP:
   - Connect to VPS via SFTP
   - Upload all project files to /var/www/ehs-pro/

ðŸ”§ STEP 4: CONFIGURE ENVIRONMENT
================================

1. CREATE PRODUCTION ENV FILES:

   Backend .env:
   cd /var/www/ehs-pro/backend
   cp .env.example .env
   nano .env

   # Update these values:
   DEBUG=False
   ALLOWED_HOSTS=your-domain.com,your-vps-ip
   DATABASE_URL=postgresql://postgres:your-db-password@db:5432/ehs_pro
   REDIS_URL=redis://redis:6379/0
   SECRET_KEY=your-super-secret-key-here

   Frontend .env:
   cd /var/www/ehs-pro/frontedn
   cp .env.example .env
   nano .env

   # Update API URL:
   VITE_API_BASE_URL=https://your-domain.com/api
   # OR
   VITE_API_BASE_URL=http://your-vps-ip:8000/api

ðŸ³ STEP 5: DOCKER DEPLOYMENT
============================

1. CREATE PRODUCTION DOCKER COMPOSE:
   cd /var/www/ehs-pro
   nano docker-compose.prod.yml

   # Copy this content:
   version: '3.8'
   
   services:
     db:
       image: postgres:15
       environment:
         POSTGRES_DB: ehs_pro
         POSTGRES_USER: postgres
         POSTGRES_PASSWORD: your-secure-password
       volumes:
         - postgres_data:/var/lib/postgresql/data
       restart: unless-stopped
   
     redis:
       image: redis:7-alpine
       restart: unless-stopped
   
     backend:
       build: ./backend
       environment:
         - DEBUG=False
       volumes:
         - ./backend:/app
         - media_files:/app/media
       depends_on:
         - db
         - redis
       restart: unless-stopped
   
     frontend:
       build: ./frontedn
       volumes:
         - ./frontedn/dist:/usr/share/nginx/html
       ports:
         - "80:80"
         - "443:443"
       depends_on:
         - backend
       restart: unless-stopped
   
   volumes:
     postgres_data:
     media_files:

2. BUILD AND START CONTAINERS:
   docker-compose -f docker-compose.prod.yml up -d --build

3. CHECK CONTAINER STATUS:
   docker-compose -f docker-compose.prod.yml ps

ðŸ—„ï¸ STEP 6: DATABASE SETUP
=========================

1. RUN MIGRATIONS:
   docker-compose -f docker-compose.prod.yml exec backend python manage.py migrate

2. CREATE SUPERUSER:
   docker-compose -f docker-compose.prod.yml exec backend python manage.py createsuperuser

3. COLLECT STATIC FILES:
   docker-compose -f docker-compose.prod.yml exec backend python manage.py collectstatic --noinput

ðŸŒ STEP 7: NGINX CONFIGURATION
==============================

1. INSTALL NGINX (if not using Docker nginx):
   apt install nginx -y

2. CREATE NGINX CONFIG:
   nano /etc/nginx/sites-available/ehs-pro

   # Add this configuration:
   server {
       listen 80;
       server_name your-domain.com your-vps-ip;
   
       location / {
           proxy_pass http://localhost:3000;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   
       location /api/ {
           proxy_pass http://localhost:8000;
           proxy_set_header Host $host;
           proxy_set_header X-Real-IP $remote_addr;
       }
   
       location /media/ {
           alias /var/www/ehs-pro/backend/media/;
       }
   
       location /static/ {
           alias /var/www/ehs-pro/backend/static/;
       }
   }

3. ENABLE SITE:
   ln -s /etc/nginx/sites-available/ehs-pro /etc/nginx/sites-enabled/
   nginx -t
   systemctl reload nginx

ðŸ”’ STEP 8: SSL CERTIFICATE (HTTPS)
==================================

1. INSTALL CERTBOT:
   apt install certbot python3-certbot-nginx -y

2. GET SSL CERTIFICATE:
   certbot --nginx -d your-domain.com

3. AUTO-RENEWAL:
   crontab -e
   # Add this line:
   0 12 * * * /usr/bin/certbot renew --quiet

ðŸ”¥ STEP 9: FIREWALL SETUP
=========================

1. INSTALL UFW:
   apt install ufw -y

2. CONFIGURE FIREWALL:
   ufw default deny incoming
   ufw default allow outgoing
   ufw allow ssh
   ufw allow 80
   ufw allow 443
   ufw enable

ðŸ“Š STEP 10: MONITORING & LOGS
============================

1. VIEW CONTAINER LOGS:
   docker-compose -f docker-compose.prod.yml logs -f backend
   docker-compose -f docker-compose.prod.yml logs -f frontend

2. SYSTEM MONITORING:
   htop
   df -h
   free -m

3. NGINX LOGS:
   tail -f /var/log/nginx/access.log
   tail -f /var/log/nginx/error.log

ðŸ”„ STEP 11: BACKUP STRATEGY
===========================

1. CREATE BACKUP SCRIPT:
   nano /root/backup.sh

   #!/bin/bash
   DATE=$(date +%Y%m%d_%H%M%S)
   
   # Database backup
   docker-compose -f /var/www/ehs-pro/docker-compose.prod.yml exec -T db pg_dump -U postgres ehs_pro > /root/backups/db_$DATE.sql
   
   # Media files backup
   tar -czf /root/backups/media_$DATE.tar.gz /var/www/ehs-pro/backend/media/
   
   # Keep only last 7 days
   find /root/backups/ -name "*.sql" -mtime +7 -delete
   find /root/backups/ -name "*.tar.gz" -mtime +7 -delete

2. MAKE EXECUTABLE & SCHEDULE:
   chmod +x /root/backup.sh
   mkdir -p /root/backups
   crontab -e
   # Add daily backup at 2 AM:
   0 2 * * * /root/backup.sh

ðŸš€ STEP 12: DOMAIN SETUP (OPTIONAL)
===================================

1. POINT DOMAIN TO VPS:
   - Go to your domain registrar
   - Add A record: @ -> your-vps-ip
   - Add A record: www -> your-vps-ip

2. UPDATE NGINX CONFIG:
   nano /etc/nginx/sites-available/ehs-pro
   # Change server_name to your actual domain

3. GET SSL FOR DOMAIN:
   certbot --nginx -d yourdomain.com -d www.yourdomain.com

âš¡ STEP 13: PERFORMANCE OPTIMIZATION
===================================

1. ENABLE GZIP COMPRESSION:
   nano /etc/nginx/nginx.conf
   # Add in http block:
   gzip on;
   gzip_types text/plain text/css application/json application/javascript;

2. SET UP REDIS CACHING:
   # Already configured in docker-compose

3. OPTIMIZE DATABASE:
   docker-compose -f docker-compose.prod.yml exec db psql -U postgres -d ehs_pro -c "VACUUM ANALYZE;"

ðŸ”§ TROUBLESHOOTING
==================

1. CHECK CONTAINER STATUS:
   docker-compose -f docker-compose.prod.yml ps

2. RESTART SERVICES:
   docker-compose -f docker-compose.prod.yml restart

3. VIEW LOGS:
   docker-compose -f docker-compose.prod.yml logs backend
   docker-compose -f docker-compose.prod.yml logs frontend

4. CHECK DISK SPACE:
   df -h

5. CHECK MEMORY:
   free -m

6. NGINX STATUS:
   systemctl status nginx

ðŸ“ MAINTENANCE COMMANDS
======================

1. UPDATE CONTAINERS:
   cd /var/www/ehs-pro
   git pull  # if using git
   docker-compose -f docker-compose.prod.yml up -d --build

2. RESTART ALL SERVICES:
   docker-compose -f docker-compose.prod.yml restart

3. CLEAN DOCKER:
   docker system prune -a

4. DATABASE BACKUP:
   docker-compose -f docker-compose.prod.yml exec db pg_dump -U postgres ehs_pro > backup.sql

5. RESTORE DATABASE:
   docker-compose -f docker-compose.prod.yml exec -T db psql -U postgres ehs_pro < backup.sql

ðŸŽ¯ FINAL CHECKLIST
==================

âœ… VPS accessible via SSH
âœ… Docker and Docker Compose installed
âœ… Project files uploaded
âœ… Environment variables configured
âœ… Containers running successfully
âœ… Database migrated and superuser created
âœ… Nginx configured and running
âœ… SSL certificate installed (if using domain)
âœ… Firewall configured
âœ… Backup strategy implemented
âœ… Application accessible via browser

ðŸŒ ACCESS YOUR APPLICATION
==========================

Frontend: http://your-vps-ip or https://your-domain.com
Backend Admin: http://your-vps-ip/admin or https://your-domain.com/admin
API: http://your-vps-ip/api or https://your-domain.com/api

ðŸ“ž SUPPORT CONTACTS
==================

Hostinger Support: Available 24/7 via chat
VPS IP: [Your VPS IP]
Domain: [Your Domain]
SSH Access: ssh root@your-vps-ip

ðŸš¨ SECURITY NOTES
=================

1. Change default passwords
2. Use strong database passwords
3. Keep system updated
4. Monitor logs regularly
5. Use SSH keys instead of passwords
6. Regular backups
7. Monitor resource usage

Your EHS Pro system is now deployed and ready for production use!